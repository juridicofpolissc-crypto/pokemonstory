<!doctype html>
<html lang="pt-BR" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mega Ca√ßa-Palavras</title>
  <script src="/_sdk/element_sdk.js"></script>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      box-sizing: border-box;
    }
    
    .cell {
      width: 18px;
      height: 18px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-weight: 600;
      cursor: pointer;
      user-select: none;
      transition: all 0.2s;
      border: 0.5px solid rgba(255, 255, 255, 0.2);
      font-size: 8px;
    }
    
    .cell-mini {
      width: 5px;
      height: 5px;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 3px;
      border: 0.5px solid rgba(255, 255, 255, 0.1);
    }

    @media (max-width: 768px) {
      .cell {
        width: 11px;
        height: 11px;
        font-size: 6px;
      }
    }
    
    .cell:hover {
      transform: scale(1.1);
    }
    
    .cell.selected {
      background: rgba(255, 215, 0, 0.5) !important;
      border-color: #FFD700;
    }
    
    .cell.found {
      background: rgba(34, 197, 94, 0.6) !important;
      border-color: #22C55E;
    }
    
    .word-item {
      transition: all 0.3s;
    }
    
    .word-item.found {
      text-decoration: line-through;
      opacity: 0.5;
    }
    
    .stats-card {
      backdrop-filter: blur(10px);
      background: rgba(255, 255, 255, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
    }
    
    @keyframes celebrate {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.1); }
    }
    
    .celebrate {
      animation: celebrate 0.5s ease-in-out;
    }
    
    @keyframes slideDown {
      from {
        opacity: 0;
        transform: translate(-50%, -100%);
      }
      to {
        opacity: 1;
        transform: translate(-50%, 0);
      }
    }
    
    @keyframes slideUp {
      from {
        opacity: 1;
        transform: translate(-50%, 0);
      }
      to {
        opacity: 0;
        transform: translate(-50%, -100%);
      }
    }

    @keyframes float {
      0%, 100% { transform: translateY(0px); }
      50% { transform: translateY(-20px); }
    }

    .float-animation {
      animation: float 3s ease-in-out infinite;
    }
  </style>
  <style>@view-transition { navigation: auto; }</style>
  <script src="/_sdk/data_sdk.js" type="text/javascript"></script>
 </head>
 <body class="h-full">
  <div id="app" class="w-full h-full overflow-auto"></div>
  <script>
    const defaultConfig = {
      game_title: "üß† CA√áA-PALAVRAS DO SER HUMANO üß†",
      instructions_text: "Encontre todas as 1000 palavras sobre o ser humano no grid gigante 80x80! Clique e arraste para selecionar.",
      background_color: "#1a1a2e",
      surface_color: "#16213e",
      text_color: "#ffffff",
      primary_action_color: "#0f4c75",
      secondary_action_color: "#3282b8",
      font_family: "Arial",
      font_size: 16
    };

    // Sistema de n√≠veis e senhas
    const LEVELS = [
      { 
        level: 1, 
        password: "HUMANO2024", 
        theme: "Ser Humano",
        unlocked: true 
      },
      { 
        level: 2, 
        password: "NATUREZA2024", 
        theme: "Natureza",
        unlocked: false 
      },
      { 
        level: 3, 
        password: "UNIVERSO2024", 
        theme: "Universo",
        unlocked: false 
      }
    ];

    let currentUser = null;
    let currentLevel = 1;
    let totalStars = 0;
    let isLocked = false;
    let currentScreen = 'home'; // 'home', 'login', 'register', 'game'

    const words = [
      // Anatomia e Fisiologia (100 palavras)
      "CEREBRO", "CORACAO", "PULMAO", "FIGADO", "ESTOMAGO", "INTESTINO", "PANCREAS", "BACO", "RINS", "BEXIGA",
      "ESQUELETO", "CRANIO", "COSTELA", "FEMUR", "TIBIA", "UMERO", "RADIO", "ULNA", "VERTEBRA", "PELVE",
      "MUSCULOS", "BICEPS", "TRICEPS", "QUADRICEPS", "GLUTEOS", "DELTOIDES", "PEITORAL", "ABDOMEN", "PANTURRILHA", "TRAPEZIO",
      "PELE", "EPIDEME", "DERME", "CABELO", "UNHAS", "GLANDULAS", "SUDORIPARA", "SEBACEA", "MELANINA", "QUERATINA",
      "SANGUE", "HEMACIA", "LEUCOCITO", "PLAQUETA", "PLASMA", "HEMOGLOBINA", "ARTERIA", "VEIA", "CAPILAR", "AORTA",
      "NEURONIO", "SINAPSE", "DENDRITO", "AXONIO", "MIELINA", "CEREBELO", "HIPOTALAMO", "HIPOCAMPO", "AMIGDALA", "CORTEX",
      "OLHOS", "RETINA", "CORNEA", "CRISTALINO", "PUPILA", "IRIS", "ESCLEROT ICA", "NERVO", "OPTICO", "CONJUNTIVA",
      "OUVIDO", "COCLEA", "TIMPANO", "MARTELO", "BIGORNA", "ESTRIBO", "CANAIS", "SEMICIRCULARES", "VESTIBULO", "AUDITIVO",
      "NARIZ", "FOSSAS", "NASAIS", "SEPTO", "OLFATO", "MUCOSA", "FARINGE", "LARINGE", "TRAQUEIA", "BRONQUIOS",
      "LINGUA", "PAPILAS", "GUSTATIVAS", "ESOFAGO", "EPIGLOTE", "SALIVA", "GARGANTA", "AMIGDALAS", "UVULA", "PALATO",
      
      // Emo√ß√µes e Psicologia (100 palavras)
      "FELICIDADE", "TRISTEZA", "RAIVA", "MEDO", "AMOR", "ODIO", "ALEGRIA", "ANSIEDADE", "ANGUSTIA", "PRAZER",
      "DOR", "CULPA", "VERGONHA", "ORGULHO", "INVEJA", "CIUME", "GRATIDAO", "COMPAIXAO", "EMPATIA", "SIMPATIA",
      "NOSTALGIA", "MELANCOLIA", "EUFORIA", "EXTASE", "SERENIDADE", "CALMA", "PANICO", "FOBIA", "TRAUMA", "STRESS",
      "DEPRESSAO", "MANIA", "PSICOSE", "NEUROSE", "HISTERIA", "PARANOIA", "ESQUIZOFRENIA", "BIPOLAR", "AUTISMO", "SINDROME",
      "CONSCIENCIA", "INCONSCIENTE", "SUBCONSCIENTE", "PERCEPCAO", "COGNICAO", "MEMORIA", "LEMBRANCA", "ESQUECIMENTO", "ATENCAO", "CONCENTRACAO",
      "INTELIGENCIA", "RACIOCINIO", "LOGICA", "INTUICAO", "CRIATIVIDADE", "IMAGINACAO", "FANTASIA", "SONHO", "PESADELO", "DEVANEIO",
      "PERSONALIDADE", "CARATER", "TEMPERAMENTO", "HUMOR", "MOTIVACAO", "VONTADE", "DESEJO", "IMPULSO", "INSTINTO", "REFLEXO",
      "COMPORTAMENTO", "ATITUDE", "HABITO", "COSTUME", "MANIA", "VICIO", "OBSESSAO", "COMPULSAO", "ADICAO", "DEPENDENCIA",
      "AUTOESTIMA", "AUTOCONFIANCA", "AUTOCONTROLE", "AUTOCONHECIMENTO", "AUTOIMAGEM", "IDENTIDADE", "EGO", "SUPEREGO", "ID", "SELF",
      "RESILIENCIA", "ADAPTACAO", "SUPERACAO", "TRANSFORMACAO", "EVOLUCAO", "CRESCIMENTO", "DESENVOLVIMENTO", "MATURIDADE", "SABEDORIA", "EXPERIENCIA",
      
      // Rela√ß√µes Humanas (100 palavras)
      "FAMILIA", "PAI", "MAE", "FILHO", "FILHA", "IRMAO", "IRMA", "AVO", "AVOH", "NETO",
      "TIO", "TIA", "PRIMO", "PRIMA", "SOBRINHO", "SOBRINHA", "PADRASTO", "MADRASTA", "ENTEADO", "ENTEADA",
      "CASAMENTO", "ESPOSO", "ESPOSA", "MARIDO", "MULHER", "NOIVO", "NOIVA", "CASAL", "MATRIMONIO", "UNIAO",
      "NAMORO", "NAMORADO", "NAMORADA", "PAQUERA", "FLERTE", "ROMANCE", "PAIXAO", "RELACIONAMENTO", "AFFAIR", "CASO",
      "AMIZADE", "AMIGO", "AMIGA", "COMPANHEIRO", "PARCEIRO", "CUMPLICE", "CONFIDENTE", "COLEGA", "CONHECIDO", "CAMARADA",
      "SOCIEDADE", "COMUNIDADE", "GRUPO", "EQUIPE", "TIME", "TRIBO", "CLA", "POVO", "NACAO", "HUMANIDADE",
      "VIZINHO", "VIZINHANCA", "BAIRRO", "CIDADE", "METROPOLE", "ALDEIA", "VILA", "POVOADO", "DISTRITO", "REGIAO",
      "CONFLITO", "BRIGA", "DISCUSSAO", "DESENTENDIMENTO", "DESAVENCA", "RECONCILIACAO", "PERDAO", "PAZ", "HARMONIA", "ACORDO",
      "COMUNICACAO", "DIALOGO", "CONVERSA", "DEBATE", "DISCUSSAO", "ARGUMENTACAO", "PERSUASAO", "CONVENCIMENTO", "NEGOCIACAO", "MEDIACAO",
      "COOPERACAO", "COLABORACAO", "SOLIDARIEDADE", "AJUDA", "APOIO", "ASSISTENCIA", "SOCORRO", "AMPARO", "PROTECAO", "CUIDADO",
      
      // Valores e √âtica (100 palavras)
      "HONESTIDADE", "INTEGRIDADE", "SINCERIDADE", "VERDADE", "AUTENTICIDADE", "TRANSPARENCIA", "FRANQUEZA", "LEALDADE", "FIDELIDADE", "CONFIANCA",
      "JUSTICA", "EQUIDADE", "IMPARCIALIDADE", "RETIDAO", "PROBIDADE", "MORALIDADE", "ETICA", "VIRTUDE", "BONDADE", "BENEVOLENCIA",
      "RESPEITO", "CONSIDERACAO", "DEFERENCIA", "REVERENCIA", "VENERACAO", "ADMIRACAO", "ESTIMA", "APRE√áO", "DIGNIDADE", "DECORO",
      "RESPONSABILIDADE", "DEVER", "OBRIGACAO", "COMPROMISSO", "PALAVRA", "PROMESSA", "JURAMENTO", "VOTO", "PACTO", "ALIANCA",
      "LIBERDADE", "AUTONOMIA", "INDEPENDENCIA", "EMANCIPACAO", "LIBERTACAO", "LIVRE", "ARBITRIO", "ESCOLHA", "OPCAO", "DECISAO",
      "IGUALDADE", "EQUANIMIDADE", "PARIDADE", "ISONOMIA", "DEMOCRACIA", "CIDADANIA", "DIREITOS", "DEVERES", "CONSTITUICAO", "LEI",
      "FRATERNIDADE", "IRMANDADE", "CONFRATERNIZACAO", "UNIDADE", "COESAO", "SOLIDARIEDADE", "MUTUALIDADE", "RECIPROCIDADE", "ALTRUISMO", "GENEROSIDADE",
      "CORAGEM", "BRAVURA", "VALENTIA", "HEROISMO", "AUDACIA", "OUSADIA", "DETERMINACAO", "PERSISTENCIA", "PERSEVERANCA", "TENACIDADE",
      "HUMILDADE", "MODESTIA", "SIMPLICIDADE", "DESPRETENSAO", "SOBRIEDADE", "COMEDIMENTO", "MODERACAO", "TEMPERANCA", "CONTINENCIA", "ABSTINENCIA",
      "PACIENCIA", "TOLERANCIA", "CLEMENCIA", "INDULGENCIA", "COMPREENSAO", "ACEITACAO", "RESIGNACAO", "CONFORMIDADE", "SERENIDADE", "TRANQUILIDADE",
      
      // Cultura e Sociedade (100 palavras)
      "ARTE", "PINTURA", "ESCULTURA", "MUSICA", "DANCA", "TEATRO", "CINEMA", "LITERATURA", "POESIA", "PROSA",
      "CULTURA", "TRADICAO", "COSTUME", "FOLCLORE", "LENDA", "MITO", "RITUAL", "CERIMONIA", "FESTA", "CELEBRACAO",
      "RELIGIAO", "FE", "CRENCA", "DEUS", "DIVINDADE", "ESPIRITUALIDADE", "ALMA", "ESPIRITO", "TRANSCENDENCIA", "SAGRADO",
      "EDUCACAO", "ENSINO", "APRENDIZAGEM", "CONHECIMENTO", "SABER", "CIENCIA", "ESTUDO", "PESQUISA", "DESCOBERTA", "INVENCAO",
      "TRABALHO", "EMPREGO", "PROFISSAO", "CARREIRA", "OCUPACAO", "OFICIO", "VOCACAO", "TALENTO", "HABILIDADE", "COMPETENCIA",
      "ECONOMIA", "DINHEIRO", "RIQUEZA", "POBREZA", "CAPITAL", "RECURSO", "PATRIMONIO", "PROPRIEDADE", "POSSE", "PERTENCE",
      "POLITICA", "GOVERNO", "ESTADO", "PODER", "AUTORIDADE", "LIDERANCA", "GOVERNANCA", "ADMINISTRACAO", "GESTAO", "CONTROLE",
      "TECNOLOGIA", "INOVACAO", "PROGRESSO", "AVANCO", "DESENVOLVIMENTO", "MODERNIZACAO", "DIGITALIZACAO", "AUTOMACAO", "ROBOTICA", "INTELIGENCIA",
      "MEIO", "AMBIENTE", "NATUREZA", "ECOLOGIA", "SUSTENTABILIDADE", "PRESERVACAO", "CONSERVACAO", "PROTECAO", "BIODIVERSIDADE", "ECOSISTEMA",
      "URBANIZACAO", "INDUSTRIALIZACAO", "GLOBALIZACAO", "MIGRACAO", "IMIGRACAO", "EMIGRACAO", "REFUGIADO", "EXILADO", "EXPATRIADO", "NOMADE",
      
      // Ciclo da Vida (100 palavras)
      "NASCIMENTO", "CONCEPCAO", "GESTACAO", "GRAVIDEZ", "PARTO", "BEBE", "RECEM", "NASCIDO", "NEONATO", "LACTENTE",
      "INFANCIA", "CRIANCA", "MENINO", "MENINA", "GAROTO", "GAROTA", "MOLEQUE", "PIVETE", "FEDELHO", "PESTINHA",
      "ADOLESCENCIA", "ADOLESCENTE", "JOVEM", "JUVENTUDE", "PUBERDADE", "TEENAGE", "JUVENIL", "RAPAZ", "MOCA", "DONZELA",
      "ADULTO", "ADULTEZ", "MATURIDADE", "MADURO", "HOMEM", "MULHER", "SENHORA", "SENHOR", "CAVALHEIRO", "DAMA",
      "VELHICE", "IDOSO", "ANCIAO", "VELHO", "VELHA", "TERCEIRA", "IDADE", "LONGEVIDADE", "CENTENARIO", "NONAGENARIO",
      "MORTE", "FALECIMENTO", "OBITO", "PASSAMENTO", "FINITUDE", "FIM", "TERMINO", "DESPEDIDA", "PARTIDA", "TRANSICAO",
      "LUTO", "DOR", "SOFRIMENTO", "PERDA", "SAUDADE", "AUSENCIA", "FALTA", "VAZIO", "TRISTEZA", "MELANCOLIA",
      "LEGADO", "HERANCA", "PATRIMONIO", "TESTAMENTO", "SUCESSAO", "DESCENDENCIA", "PROGENIE", "POSTERIDADE", "GENEALOGIA", "LINHAGEM",
      "MEMORIA", "LEMBRANCA", "RECORDACAO", "REMINISCENCIA", "EVOCACAO", "REMEMORACAO", "ANAMNESE", "RETROSPECTIVA", "FLASHBACK", "PASSADO",
      "FUTURO", "PORVIR", "AMANHA", "DESTINO", "SORTE", "SINA", "FORTUNA", "PROVIDENCIA", "FADO", "KARMA",
      
      // Sa√∫de e Bem-estar (100 palavras)
      "SAUDE", "VIGOR", "VITALIDADE", "ENERGIA", "DISPOSICAO", "ANIMO", "FORMA", "FISICA", "WELLNESS", "BEM",
      "DOENCA", "ENFERMIDADE", "MAL", "PATOLOGIA", "SINDROME", "DISTURBIO", "TRANSTORNO", "AFECCAO", "MOLESTIA", "MAZELA",
      "SINTOMA", "SINAL", "MANIFESTACAO", "INDICACAO", "EVIDENCIA", "INDICIO", "PISTA", "MARCA", "CARACTERISTICA", "PARTICULARIDADE",
      "DIAGNOSTICO", "EXAME", "ANALISE", "INVESTIGACAO", "TESTE", "PROVA", "AVALIACAO", "VERIFICACAO", "CHECAGEM", "RASTREAMENTO",
      "TRATAMENTO", "TERAPIA", "CURA", "CURATIVO", "REMEDIO", "MEDICAMENTO", "FARMACO", "DROGA", "SUBSTANCIA", "COMPOSTO",
      "PREVENCAO", "PROFILAXIA", "PRECAUCAO", "CUIDADO", "PROTECAO", "DEFESA", "IMUNIZACAO", "VACINACAO", "VACINA", "SORO",
      "NUTRICAO", "ALIMENTACAO", "DIETA", "REGIME", "CARDAPIO", "MENU", "REFEICAO", "COMIDA", "ALIMENTO", "NUTRIENTE",
      "EXERCICIO", "ATIVIDADE", "GINASTICA", "ESPORTE", "PRATICA", "TREINO", "WORKOUT", "FITNESS", "CONDICIONAMENTO", "PREPARACAO",
      "SONO", "REPOUSO", "DESCANSO", "RELAXAMENTO", "DORMIDA", "SONECA", "COCHILO", "SESTA", "HIBERNACAO", "LETARGIA",
      "HIGIENE", "LIMPEZA", "ASSEIO", "LAVAGEM", "PURIFICACAO", "DESINFECCAO", "ESTERILIZACAO", "SANITIZACAO", "ANTISSEPSIA", "PROFILAXIA",
      
      // Sentidos e Percep√ß√µes (100 palavras)
      "VISAO", "ENXERGAR", "VER", "OLHAR", "OBSERVAR", "CONTEMPLAR", "ADMIRAR", "ESPIAR", "ESPREITAR", "FITAR",
      "AUDICAO", "OUVIR", "ESCUTAR", "AUSCULTAR", "PERCEBER", "CAPTAR", "DETECTAR", "SENTIR", "NOTAR", "DISTINGUIR",
      "OLFATO", "CHEIRAR", "FAREJAR", "INALAR", "ASPIRAR", "RESPIRAR", "FUNGAR", "SORVER", "ABSORVER", "PERFUMAR",
      "PALADAR", "PROVAR", "SABOREAR", "DEGUSTAR", "EXPERIMENTAR", "TESTAR", "GOSTAR", "APRECIAR", "DELICIAR", "DESFRUTAR",
      "TATO", "TOCAR", "APALPAR", "TATEAR", "ACARICIAR", "AFAGAR", "FRICCIONAR", "MASSAGEAR", "PRESSIONAR", "APERTAR",
      "DOR", "SOFRIMENTO", "TORMENTO", "AGONIA", "SUPLICIO", "MARTIR IO", "CALVARIO", "TORTURA", "FLAGELO", "PADECIMENTO",
      "PRAZER", "DELEITE", "GOZO", "SATISFACAO", "CONTENTAMENTO", "REGOZIJO", "JUBILO", "EXULTACAO", "FRUICAO", "DELECTACAO",
      "TEMPERATURA", "CALOR", "FRIO", "QUENTE", "GELADO", "MORNO", "TEPIDO", "FERVENTE", "ARDENTE", "GLACIAL",
      "PRESSAO", "TOQUE", "CONTATO", "ATRITO", "FRICCAO", "RASPAGEM", "ARRANHAO", "CUTUCADA", "BELISCAO", "PICADA",
      "EQUILIBRIO", "BALANCO", "ESTABILIDADE", "POSTURA", "POSICAO", "ORIENTACAO", "LOCALIZACAO", "ESPACIAL", "PROPRIOCEPCAO", "CINESTESIA",
      
      // Pensamento e Raz√£o (100 palavras)
      "PENSAMENTO", "IDEIA", "CONCEITO", "NOCAO", "REPRESENTACAO", "IMAGEM", "MENTAL", "ABSTRAC AO", "GENERALIZACAO", "CATEGORIZACAO",
      "RACIOCINIO", "LOGICA", "DEDUCAO", "INDUCAO", "INFERENCIA", "CONCLUSAO", "SILOGISMO", "ARGUMENTO", "PREMISSA", "CONSEQUENCIA",
      "REFLEXAO", "MEDITACAO", "CONTEMPLACAO", "PONDERACAO", "CONSIDERACAO", "ANALISE", "EXAME", "ESTUDO", "INVESTIGACAO", "PESQUISA",
      "JULGAMENTO", "AVALIACAO", "APRECIACAO", "ESTIMACAO", "VALORACAO", "MENSU RACAO", "QUALIFICACAO", "CLASSIFICACAO", "HIERARQUIZACAO", "ORDENACAO",
      "DECISAO", "ESCOLHA", "SELECAO", "OPCAO", "ALTERNATIVA", "POSSIBILIDADE", "CHANCE", "OPORTUNIDADE", "OCASIAO", "MOMENTO",
      "DUVIDA", "INCERTEZA", "HESITACAO", "VACILACAO", "INDECISAO", "AMBIGUIDADE", "EQUIVOCO", "DILEMA", "IMPASSE", "ENIGMA",
      "CERTEZA", "SEGURANCA", "CONVICCAO", "FIRMEZA", "DETERMINACAO", "RESOLUCAO", "DECISAO", "ASSERTIVIDADE", "CATEGORI CIDADE", "PEREMPTORIEDADE",
      "CRENCA", "FE", "CONFIANCA", "CREDITO", "CREDIBILIDADE", "VERACIDADE", "VEROSSIMILHANCA", "PLAUSIBILIDADE", "PROBABILIDADE", "POSSIBILIDADE",
      "APRENDIZAGEM", "AQUISICAO", "ASSIMILACAO", "INTERIORIZACAO", "INTERNALIZACAO", "INCORPORACAO", "ABSORCAO", "COMPREENSAO", "ENTENDIMENTO", "CAPTACAO",
      "SABEDORIA", "PRUDENCIA", "SENSATEZ", "JUIZO", "DISCERNIMENTO", "CRITERIO", "BOM", "SENSO", "PERSPICACIA", "SAGACIDADE",
      
      // Express√£o e Comunica√ß√£o (100 palavras)
      "LINGUAGEM", "IDIOMA", "LINGUA", "FALA", "DISCURSO", "ORATORIA", "ELOQUENCIA", "VERBO", "PALAVRA", "VOCABULARIO",
      "ESCRITA", "TEXTO", "REDACAO", "COMPOSICAO", "NARRATIVA", "DESCRICAO", "DISSERTACAO", "ARGUMENTACAO", "EXPOSICAO", "RELATO",
      "LEITURA", "INTERPRETACAO", "COMPREENSAO", "DECODIFICACAO", "ANALISE", "EXEGESE", "HERMENEUTICA", "CRITICA", "APRECIACAO", "AVALIACAO",
      "EXPRESSAO", "MANIFESTACAO", "DEMONSTRACAO", "EXTERNALIZACAO", "EXTERIORIZACAO", "REVELACAO", "EXPOSICAO", "APRESENTACAO", "EXHIBICAO", "MOSTRA",
      "GESTO", "ACENO", "SINAL", "MOVIMENTO", "MENEIO", "TREJEITO", "CARETA", "MIMICA", "PANTOMIMA", "COREOGRAFIA",
      "VOZ", "SOM", "TIMBRE", "TOM", "TONALIDADE", "ALTURA", "VOLUME", "INTENSIDADE", "SONORIDADE", "RESONANCIA",
      "SILENCIO", "QUIETUDE", "CALMA", "TRANQUILIDADE", "SOSSEGO", "PAZ", "MUTISMO", "MUDEZ", "EMUDECIMENTO", "AFONIA",
      "RISO", "RISADA", "GARGALHADA", "HILARIDADE", "ALEGRIA", "JOVIALIDADE", "BUEN", "HUMOR", "COMICIDADE", "GRACA",
      "CHORO", "PRANTO", "LAGRIMA", "SOLU√áO", "LAMENTO", "GEMIDO", "LAMURIA", "QUEIXA", "CARPIDO", "PRANTEAMENTO",
      "CANTO", "MELODIA", "HARMONIA", "RITMO", "CADENCIA", "COMPASSO", "METRICA", "VERSIFICACAO", "MELOPEIA", "MODULACAO",
      
      // A√ß√µes e Movimentos (100 palavras)
      "ANDAR", "CAMINHAR", "MARCHAR", "PASSEAR", "DEAMBULAR", "PERAMBULAR", "VAGAR", "ERRAR", "VADIAR", "FLANAR",
      "CORRER", "TROTAR", "GALOPAR", "DISPARAR", "ACELERAR", "APRESSAR", "PRECIPITAR", "DESATAR", "ARREMETER", "INVESTIR",
      "SALTAR", "PULAR", "ALCAR", "ELEVAR", "ERGUER", "LEVANTAR", "SUSPENDER", "ICAR", "SOERGUER", "SUBLIMAR",
      "DORMIR", "ADORMECER", "COCHILAR", "SESTEAR", "REPOUSAR", "DESCANSAR", "RELAXAR", "JAZER", "DEITAR", "RECLINAR",
      "ACORDAR", "DESPERTAR", "LEVANTAR", "ERGUER", "EMERGIR", "RESSURGIR", "RENASCER", "REVIVER", "RESSUSCITAR", "REERGUER",
      "COMER", "ALIMENTAR", "NUTRIR", "SUSTENTAR", "MANTER", "CONSERVAR", "PRESERVAR", "GUARDAR", "PROTEGER", "DEFENDER",
      "BEBER", "TOMAR", "INGERIR", "CONSUMIR", "ABSORVER", "ASSIMILAR", "INCORPORAR", "INTEGRAR", "INCLUIR", "ABRANGER",
      "RESPIRAR", "INSPIRAR", "EXPIRAR", "SOPRAR", "BUFAR", "RESFOLEGAR", "ARQUEAR", "OFEGAR", "SUSPIRAR", "EXALAR",
      "SENTIR", "PERCEBER", "CAPTAR", "DETECTAR", "NOTAR", "OBSERVAR", "REPARAR", "ATENTAR", "ADVERTIR", "AVISAR",
      "PENSAR", "REFLETIR", "MEDITAR", "COGITAR", "PONDERAR", "CONSIDERAR", "RUMINAR", "CISMAR", "MATUTAR", "ESPECULAR"
    ];

    const GRID_SIZE = 80;
    let grid = [];
    let selectedCells = [];
    let foundWords = new Set();
    let isSelecting = false;
    let wordPositions = new Map();
    let hintsRemaining = 10;

    // LocalStorage Functions
    function saveToLocalStorage(key, data) {
      localStorage.setItem(key, JSON.stringify(data));
    }

    function getFromLocalStorage(key) {
      const data = localStorage.getItem(key);
      return data ? JSON.parse(data) : null;
    }

    function registerUser(name, email, password) {
      const users = getFromLocalStorage('users') || [];
      
      if (users.find(u => u.email === email)) {
        return { success: false, message: 'E-mail j√° cadastrado!' };
      }

      const newUser = {
        id: Date.now(),
        name,
        email,
        password,
        createdAt: new Date().toISOString(),
        currentLevel: 1,
        totalStars: 0,
        levelProgress: {}
      };

      users.push(newUser);
      saveToLocalStorage('users', users);
      return { success: true, user: newUser };
    }

    function loginUser(email, password) {
      const users = getFromLocalStorage('users') || [];
      const user = users.find(u => u.email === email && u.password === password);
      
      if (user) {
        saveToLocalStorage('currentUser', user);
        return { success: true, user };
      }
      return { success: false, message: 'E-mail ou senha incorretos!' };
    }

    function logoutUser() {
      localStorage.removeItem('currentUser');
      currentUser = null;
      currentScreen = 'home';
      render();
    }

    function saveUserProgress() {
      if (!currentUser) return;
      
      const users = getFromLocalStorage('users') || [];
      const userIndex = users.findIndex(u => u.id === currentUser.id);
      
      if (userIndex !== -1) {
        users[userIndex].currentLevel = currentLevel;
        users[userIndex].totalStars = totalStars;
        users[userIndex].levelProgress = {
          level: currentLevel,
          foundWords: Array.from(foundWords),
          hintsRemaining
        };
        users[userIndex].lastPlayed = new Date().toISOString();
        
        saveToLocalStorage('users', users);
        currentUser = users[userIndex];
        saveToLocalStorage('currentUser', currentUser);
      }
    }

    function loadUserProgress() {
      if (!currentUser) return;
      
      currentLevel = currentUser.currentLevel || 1;
      totalStars = currentUser.totalStars || 0;
      
      if (currentUser.levelProgress) {
        foundWords = new Set(currentUser.levelProgress.foundWords || []);
        hintsRemaining = currentUser.levelProgress.hintsRemaining || 10;
      }
    }

    function useHint() {
      if (hintsRemaining <= 0) {
        showNotification("‚ùå Voc√™ n√£o tem mais dicas dispon√≠veis!");
        return;
      }

      const notFoundWords = words.filter(word => !foundWords.has(word));
      if (notFoundWords.length === 0) {
        showNotification("‚úÖ Voc√™ j√° encontrou todas as palavras!");
        return;
      }

      const randomWord = notFoundWords[Math.floor(Math.random() * notFoundWords.length)];
      const positions = wordPositions.get(randomWord);

      if (positions) {
        positions.forEach(pos => {
          const cell = document.querySelector(`[data-row="${pos.row}"][data-col="${pos.col}"]`);
          if (cell) {
            cell.style.background = "rgba(255, 215, 0, 0.8)";
            cell.style.transform = "scale(1.2)";
            cell.style.boxShadow = "0 0 20px rgba(255, 215, 0, 0.8)";
          }
        });

        setTimeout(() => {
          positions.forEach(pos => {
            const cell = document.querySelector(`[data-row="${pos.row}"][data-col="${pos.col}"]`);
            if (cell && !cell.classList.contains('found')) {
              cell.style.background = defaultConfig.secondary_action_color;
              cell.style.transform = "";
              cell.style.boxShadow = "";
            }
          });
        }, 2000);

        hintsRemaining--;
        saveUserProgress();
        updateStats();
        showNotification(`üí° Dica revelada: ${randomWord} (${hintsRemaining} dicas restantes)`);
      }
    }

    function showNotification(message) {
      const notification = document.createElement('div');
      notification.style.cssText = `
        position: fixed;
        top: 20px;
        left: 50%;
        transform: translateX(-50%);
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        color: white;
        padding: 15px 30px;
        border-radius: 10px;
        font-size: ${defaultConfig.font_size * 1.1}px;
        font-weight: bold;
        box-shadow: 0 10px 30px rgba(0,0,0,0.3);
        z-index: 2000;
        animation: slideDown 0.3s ease-out;
      `;
      notification.textContent = message;
      document.body.appendChild(notification);

      setTimeout(() => {
        notification.style.animation = "slideUp 0.3s ease-in";
        setTimeout(() => notification.remove(), 300);
      }, 3000);
    }

    function initializeGrid() {
      grid = Array(GRID_SIZE).fill(null).map(() => 
        Array(GRID_SIZE).fill(null).map(() => ({
          letter: '',
          isPartOfWord: false,
          wordIndices: []
        }))
      );

      words.forEach((word, wordIndex) => {
        let placed = false;
        let attempts = 0;
        
        while (!placed && attempts < 1000) {
          attempts++;
          const direction = Math.floor(Math.random() * 8);
          const row = Math.floor(Math.random() * GRID_SIZE);
          const col = Math.floor(Math.random() * GRID_SIZE);
          
          if (canPlaceWord(word, row, col, direction)) {
            placeWord(word, row, col, direction, wordIndex);
            placed = true;
          }
        }
      });

      for (let i = 0; i < GRID_SIZE; i++) {
        for (let j = 0; j < GRID_SIZE; j++) {
          if (!grid[i][j].letter) {
            grid[i][j].letter = String.fromCharCode(65 + Math.floor(Math.random() * 26));
          }
        }
      }
    }

    function canPlaceWord(word, startRow, startCol, direction) {
      const directions = [
        [0, 1], [1, 0], [1, 1], [-1, 1],
        [0, -1], [-1, 0], [-1, -1], [1, -1]
      ];
      const [dRow, dCol] = directions[direction];
      
      for (let i = 0; i < word.length; i++) {
        const row = startRow + (dRow * i);
        const col = startCol + (dCol * i);
        
        if (row < 0 || row >= GRID_SIZE || col < 0 || col >= GRID_SIZE) {
          return false;
        }
        
        if (grid[row][col].letter && grid[row][col].letter !== word[i]) {
          return false;
        }
      }
      
      return true;
    }

    function placeWord(word, startRow, startCol, direction, wordIndex) {
      const directions = [
        [0, 1], [1, 0], [1, 1], [-1, 1],
        [0, -1], [-1, 0], [-1, -1], [1, -1]
      ];
      const [dRow, dCol] = directions[direction];
      const positions = [];
      
      for (let i = 0; i < word.length; i++) {
        const row = startRow + (dRow * i);
        const col = startCol + (dCol * i);
        grid[row][col].letter = word[i];
        grid[row][col].isPartOfWord = true;
        grid[row][col].wordIndices.push(wordIndex);
        positions.push({ row, col });
      }
      
      wordPositions.set(word, positions);
    }

    function checkSelectedWord() {
      if (selectedCells.length < 3) return;
      
      const selectedWord = selectedCells.map(cell => 
        grid[cell.row][cell.col].letter
      ).join('');
      
      if (words.includes(selectedWord) && !foundWords.has(selectedWord)) {
        foundWords.add(selectedWord);
        totalStars++;
        
        selectedCells.forEach(cell => {
          const cellElement = document.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
          cellElement.classList.remove('selected');
          cellElement.classList.add('found');
        });
        
        const wordElement = document.getElementById(`word-${selectedWord}`);
        if (wordElement) {
          wordElement.classList.add('found', 'celebrate');
        }
        
        saveUserProgress();
        showNotification(`‚≠ê +1 ESTRELA! Total: ${totalStars} ‚≠ê`);
        updateStats();
        
        if (foundWords.size === words.length) {
          setTimeout(() => {
            showLevelComplete();
          }, 500);
        }
      }
      
      selectedCells.forEach(cell => {
        const cellElement = document.querySelector(`[data-row="${cell.row}"][data-col="${cell.col}"]`);
        if (!cellElement.classList.contains('found')) {
          cellElement.classList.remove('selected');
        }
      });
      
      selectedCells = [];
    }

    function showLevelComplete() {
      if (isLocked) return;
      isLocked = true;

      const nextLevel = LEVELS[currentLevel];
      const hasNextLevel = nextLevel && !nextLevel.unlocked;

      const overlay = document.createElement('div');
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 3000;
        animation: fadeIn 0.3s ease-in;
      `;

      overlay.innerHTML = `
        <div style="
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          padding: 50px 70px;
          border-radius: 25px;
          text-align: center;
          box-shadow: 0 25px 70px rgba(0,0,0,0.7);
          max-width: 600px;
          animation: celebrate 0.5s ease-in-out;
        ">
          <div style="font-size: 80px; margin-bottom: 20px;">üéâ</div>
          <h2 style="font-size: 36px; color: white; margin-bottom: 20px; font-weight: bold;">
            N√çVEL ${currentLevel} COMPLETO!
          </h2>
          <div style="font-size: 24px; color: #FFD700; margin-bottom: 30px; font-weight: bold;">
            ‚≠ê ${totalStars} ESTRELAS CONQUISTADAS! ‚≠ê
          </div>
          ${hasNextLevel ? `
            <div style="background: rgba(255,255,255,0.2); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
              <p style="font-size: 18px; color: white; margin-bottom: 15px;">
                üîì PR√ìXIMO N√çVEL DESBLOQUEADO!
              </p>
              <p style="font-size: 16px; color: #FFD700; margin-bottom: 10px; font-weight: bold;">
                Tema: ${nextLevel.theme}
              </p>
              <p style="font-size: 14px; color: white; margin-bottom: 5px;">
                Senha para acessar depois:
              </p>
              <p style="font-size: 22px; color: #FFD700; font-weight: bold; letter-spacing: 2px;">
                ${nextLevel.password}
              </p>
            </div>
            <button onclick="nextLevel()" style="
              background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
              color: #000;
              border: none;
              padding: 18px 40px;
              border-radius: 12px;
              font-size: 20px;
              font-weight: bold;
              cursor: pointer;
              box-shadow: 0 5px 15px rgba(0,0,0,0.3);
              transition: transform 0.2s;
            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
              ‚ñ∂ JOGAR N√çVEL ${nextLevel.level}
            </button>
          ` : `
            <div style="background: rgba(255,255,255,0.2); padding: 25px; border-radius: 15px; margin-bottom: 25px;">
              <p style="font-size: 20px; color: white; font-weight: bold;">
                üèÜ VOC√ä COMPLETOU TODOS OS N√çVEIS! üèÜ
              </p>
            </div>
            <button onclick="location.reload()" style="
              background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
              color: #000;
              border: none;
              padding: 18px 40px;
              border-radius: 12px;
              font-size: 20px;
              font-weight: bold;
              cursor: pointer;
              box-shadow: 0 5px 15px rgba(0,0,0,0.3);
              transition: transform 0.2s;
            " onmouseover="this.style.transform='scale(1.05)'" onmouseout="this.style.transform='scale(1)'">
              üîÑ JOGAR NOVAMENTE
            </button>
          `}
        </div>
      `;

      document.body.appendChild(overlay);
    }

    function nextLevel() {
      if (LEVELS[currentLevel]) {
        LEVELS[currentLevel].unlocked = true;
        currentLevel++;
        foundWords.clear();
        hintsRemaining = 10;
        isLocked = false;
        
        saveUserProgress();
        
        const overlay = document.querySelector('[style*="rgba(0, 0, 0, 0.9)"]');
        if (overlay) overlay.remove();
        
        initializeGrid();
        render();
        showNotification(`üéÆ N√≠vel ${currentLevel} iniciado! Tema: ${LEVELS[currentLevel - 1].theme}`);
      }
    }

    function showPasswordModal() {
      const overlay = document.createElement('div');
      overlay.id = 'password-modal';
      overlay.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        z-index: 3000;
      `;

      overlay.innerHTML = `
        <div style="
          background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
          padding: 40px 50px;
          border-radius: 20px;
          text-align: center;
          box-shadow: 0 20px 60px rgba(0,0,0,0.7);
          max-width: 500px;
        ">
          <h2 style="font-size: 28px; color: white; margin-bottom: 20px; font-weight: bold;">
            üîí DIGITE A SENHA DO N√çVEL
          </h2>
          <input 
            type="text" 
            id="password-input" 
            placeholder="Digite a senha..."
            style="
              width: 100%;
              padding: 15px;
              font-size: 18px;
              border: none;
              border-radius: 10px;
              margin-bottom: 20px;
              text-align: center;
              text-transform: uppercase;
              font-weight: bold;
              letter-spacing: 2px;
            "
          />
          <div style="display: flex; gap: 15px;">
            <button onclick="checkPassword()" style="
              flex: 1;
              background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
              color: #000;
              border: none;
              padding: 15px;
              border-radius: 10px;
              font-size: 18px;
              font-weight: bold;
              cursor: pointer;
            ">
              ‚úì CONFIRMAR
            </button>
            <button onclick="closePasswordModal()" style="
              flex: 1;
              background: #e74c3c;
              color: white;
              border: none;
              padding: 15px;
              border-radius: 10px;
              font-size: 18px;
              font-weight: bold;
              cursor: pointer;
            ">
              ‚úï CANCELAR
            </button>
          </div>
        </div>
      `;

      document.body.appendChild(overlay);
      document.getElementById('password-input').focus();
      
      document.getElementById('password-input').addEventListener('keypress', (e) => {
        if (e.key === 'Enter') checkPassword();
      });
    }

    function checkPassword() {
      const input = document.getElementById('password-input').value.toUpperCase();
      const levelFound = LEVELS.find(l => l.password === input);

      if (levelFound) {
        levelFound.unlocked = true;
        currentLevel = levelFound.level;
        foundWords.clear();
        hintsRemaining = 10;
        
        saveUserProgress();
        closePasswordModal();
        initializeGrid();
        render();
        showNotification(`‚úÖ Senha correta! N√≠vel ${currentLevel} desbloqueado!`);
      } else {
        showNotification('‚ùå Senha incorreta! Tente novamente.');
      }
    }

    function closePasswordModal() {
      const modal = document.getElementById('password-modal');
      if (modal) modal.remove();
    }

    function updateStats() {
      const statsElement = document.getElementById('stats');
      const percentage = Math.round((foundWords.size / words.length) * 100);
      statsElement.innerHTML = `
        <div style="font-size: ${defaultConfig.font_size * 1.8}px; font-weight: bold; margin-bottom: 15px; color: #FFD700;">
          ‚≠ê ${totalStars} ESTRELAS ‚≠ê
        </div>
        <div style="font-size: ${defaultConfig.font_size * 1.2}px; font-weight: bold; margin-bottom: 10px;">
          N√≠vel ${currentLevel} - ${LEVELS[currentLevel - 1].theme}
        </div>
        <div style="font-size: ${defaultConfig.font_size * 1.5}px; font-weight: bold; margin-bottom: 10px;">
          ${foundWords.size} / ${words.length}
        </div>
        <div style="font-size: ${defaultConfig.font_size}px; margin-bottom: 15px;">
          ${percentage}% Completo
        </div>
        <div style="font-size: ${defaultConfig.font_size * 0.9}px; color: #FFD700; margin-top: 10px;">
          üí° ${hintsRemaining} dicas restantes
        </div>
      `;
    }

    function renderHomeScreen() {
      const customFont = defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      
      // Create mini grid for preview
      const miniGridSize = 40;
      const miniGrid = Array(miniGridSize).fill(null).map(() => 
        Array(miniGridSize).fill(null).map(() => 
          String.fromCharCode(65 + Math.floor(Math.random() * 26))
        )
      );

      return `
        <div style="background: ${defaultConfig.background_color}; min-height: 100%; padding: 20px 15px; font-family: ${customFont}, ${baseFontStack}; display: flex; align-items: center; justify-content: center;">
          <div style="max-width: 1200px; width: 100%;">
            <div style="text-align: center; margin-bottom: 30px;">
              <h1 class="float-animation" style="font-size: ${defaultConfig.font_size * 2}px; color: ${defaultConfig.text_color}; margin-bottom: 15px; font-weight: bold; text-shadow: 0 0 30px rgba(102, 126, 234, 0.8);">
                üß† MEGA CA√áA-PALAVRAS üß†
              </h1>
              <p style="font-size: ${defaultConfig.font_size * 0.9}px; color: ${defaultConfig.text_color}; opacity: 0.9; margin-bottom: 8px;">
                3 N√≠veis ‚Ä¢ 1000 Palavras ‚Ä¢ Estrelas
              </p>
              <p style="font-size: ${defaultConfig.font_size * 0.85}px; color: #FFD700; opacity: 0.9;">
                Crie seu perfil e jogue!
              </p>
            </div>

            <div style="display: grid; grid-template-columns: 1fr; gap: 25px; align-items: stretch;">
              @media (min-width: 768px) {
                div { grid-template-columns: 1fr 1fr !important; }
              }
              <!-- Mini Grid Preview -->
              <div style="background: ${defaultConfig.surface_color}; border-radius: 15px; padding: 20px; box-shadow: 0 10px 40px rgba(0,0,0,0.4);">
                <h3 style="font-size: ${defaultConfig.font_size * 1.2}px; color: ${defaultConfig.text_color}; text-align: center; margin-bottom: 15px; font-weight: bold;">
                  üìã Preview
                </h3>
                <div style="display: flex; justify-content: center; margin-bottom: 15px; overflow: auto; border-radius: 8px;">
                  <div>
                    ${miniGrid.map(row => `
                      <div style="display: flex;">
                        ${row.map(letter => `
                          <div class="cell-mini" style="background: ${defaultConfig.secondary_action_color}; color: ${defaultConfig.text_color};">
                            ${letter}
                          </div>
                        `).join('')}
                      </div>
                    `).join('')}
                  </div>
                </div>
                <div style="background: rgba(255,255,255,0.1); padding: 15px; border-radius: 8px;">
                  <h4 style="font-size: ${defaultConfig.font_size}px; color: #FFD700; margin-bottom: 12px; font-weight: bold;">
                    üéÆ N√≠veis:
                  </h4>
                  ${LEVELS.map(level => `
                    <div style="margin-bottom: 8px; padding: 8px; background: rgba(0,0,0,0.3); border-radius: 6px;">
                      <span style="color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.85}px;">
                        ${level.unlocked ? 'üîì' : 'üîí'} N√≠vel ${level.level}: ${level.theme}
                      </span>
                      <br/>
                      <span style="color: #FFD700; font-size: ${defaultConfig.font_size * 0.75}px; font-weight: bold;">
                        Senha: ${level.password}
                      </span>
                    </div>
                  `).join('')}
                </div>
              </div>

              <!-- Login/Register Panel -->
              <div style="background: ${defaultConfig.surface_color}; border-radius: 15px; padding: 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.4);">
                <div style="text-align: center; margin-bottom: 20px;">
                  <div style="font-size: 50px; margin-bottom: 12px;">üë§</div>
                  <h2 style="font-size: ${defaultConfig.font_size * 1.6}px; color: ${defaultConfig.text_color}; font-weight: bold;">
                    Bem-vindo!
                  </h2>
                </div>

                <button onclick="showLoginScreen()" style="
                  width: 100%;
                  background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                  color: white;
                  border: none;
                  padding: 15px;
                  border-radius: 10px;
                  font-size: ${defaultConfig.font_size * 1.1}px;
                  font-weight: bold;
                  cursor: pointer;
                  margin-bottom: 12px;
                  transition: transform 0.2s;
                  box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
                " onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'">
                  üîê FAZER LOGIN
                </button>

                <button onclick="showRegisterScreen()" style="
                  width: 100%;
                  background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
                  color: #000;
                  border: none;
                  padding: 15px;
                  border-radius: 10px;
                  font-size: ${defaultConfig.font_size * 1.1}px;
                  font-weight: bold;
                  cursor: pointer;
                  transition: transform 0.2s;
                  box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
                " onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'">
                  ‚ú® CRIAR CONTA
                </button>

                <div style="margin-top: 20px; padding: 15px; background: rgba(255,255,255,0.1); border-radius: 8px; text-align: center;">
                  <p style="font-size: ${defaultConfig.font_size * 0.85}px; color: ${defaultConfig.text_color}; margin-bottom: 8px;">
                    ‚úì Salve seu progresso
                  </p>
                  <p style="font-size: ${defaultConfig.font_size * 0.85}px; color: ${defaultConfig.text_color}; margin-bottom: 8px;">
                    ‚úì Conquiste estrelas
                  </p>
                  <p style="font-size: ${defaultConfig.font_size * 0.85}px; color: ${defaultConfig.text_color};">
                    ‚úì Desbloqueie n√≠veis
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderLoginScreen() {
      const customFont = defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      
      return `
        <div style="background: ${defaultConfig.background_color}; min-height: 100%; padding: 20px 15px; font-family: ${customFont}, ${baseFontStack}; display: flex; align-items: center; justify-content: center;">
          <div style="max-width: 450px; width: 100%; background: ${defaultConfig.surface_color}; border-radius: 15px; padding: 30px 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.4);">
            <div style="text-align: center; margin-bottom: 25px;">
              <div style="font-size: 60px; margin-bottom: 12px;">üîê</div>
              <h2 style="font-size: ${defaultConfig.font_size * 1.8}px; color: ${defaultConfig.text_color}; font-weight: bold; margin-bottom: 8px;">
                Login
              </h2>
              <p style="font-size: ${defaultConfig.font_size * 0.9}px; color: ${defaultConfig.text_color}; opacity: 0.8;">
                Entre com sua conta
              </p>
            </div>

            <form onsubmit="handleLogin(event)" style="margin-bottom: 18px;">
              <label for="login-email" style="display: block; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.95}px; margin-bottom: 6px; font-weight: 600;">
                E-mail
              </label>
              <input 
                type="email" 
                id="login-email" 
                required
                style="
                  width: 100%;
                  padding: 13px;
                  font-size: ${defaultConfig.font_size * 0.95}px;
                  border: 2px solid rgba(255,255,255,0.2);
                  border-radius: 10px;
                  margin-bottom: 18px;
                  background: rgba(255,255,255,0.1);
                  color: ${defaultConfig.text_color};
                "
              />

              <label for="login-password" style="display: block; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.95}px; margin-bottom: 6px; font-weight: 600;">
                Senha
              </label>
              <input 
                type="password" 
                id="login-password" 
                required
                style="
                  width: 100%;
                  padding: 13px;
                  font-size: ${defaultConfig.font_size * 0.95}px;
                  border: 2px solid rgba(255,255,255,0.2);
                  border-radius: 10px;
                  margin-bottom: 22px;
                  background: rgba(255,255,255,0.1);
                  color: ${defaultConfig.text_color};
                "
              />

              <button type="submit" style="
                width: 100%;
                background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                color: white;
                border: none;
                padding: 15px;
                border-radius: 10px;
                font-size: ${defaultConfig.font_size * 1.1}px;
                font-weight: bold;
                cursor: pointer;
                transition: transform 0.2s;
                box-shadow: 0 5px 20px rgba(102, 126, 234, 0.4);
              " onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'">
                ENTRAR
              </button>
            </form>

            <div style="text-align: center; margin-top: 18px;">
              <p style="color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.9}px; margin-bottom: 10px;">
                N√£o tem uma conta?
              </p>
              <button onclick="showRegisterScreen()" style="
                background: transparent;
                color: #FFD700;
                border: 2px solid #FFD700;
                padding: 10px 25px;
                border-radius: 8px;
                font-size: ${defaultConfig.font_size * 0.95}px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s;
              " onmouseover="this.style.background='#FFD700'; this.style.color='#000'" onmouseout="this.style.background='transparent'; this.style.color='#FFD700'">
                Criar Conta
              </button>
            </div>

            <div style="text-align: center; margin-top: 20px;">
              <button onclick="showHomeScreen()" style="
                background: transparent;
                color: ${defaultConfig.text_color};
                border: none;
                font-size: ${defaultConfig.font_size * 0.85}px;
                cursor: pointer;
                opacity: 0.7;
                transition: opacity 0.2s;
              " onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.7'">
                ‚Üê Voltar
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function renderRegisterScreen() {
      const customFont = defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      
      return `
        <div style="background: ${defaultConfig.background_color}; min-height: 100%; padding: 20px 15px; font-family: ${customFont}, ${baseFontStack}; display: flex; align-items: center; justify-content: center;">
          <div style="max-width: 450px; width: 100%; background: ${defaultConfig.surface_color}; border-radius: 15px; padding: 30px 25px; box-shadow: 0 10px 40px rgba(0,0,0,0.4);">
            <div style="text-align: center; margin-bottom: 20px;">
              <div style="font-size: 60px; margin-bottom: 10px;">‚ú®</div>
              <h2 style="font-size: ${defaultConfig.font_size * 1.8}px; color: ${defaultConfig.text_color}; font-weight: bold; margin-bottom: 8px;">
                Criar Conta
              </h2>
              <p style="font-size: ${defaultConfig.font_size * 0.9}px; color: ${defaultConfig.text_color}; opacity: 0.8;">
                Preencha os dados
              </p>
            </div>

            <form onsubmit="handleRegister(event)">
              <label for="register-name" style="display: block; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.95}px; margin-bottom: 6px; font-weight: 600;">
                Nome Completo
              </label>
              <input 
                type="text" 
                id="register-name" 
                required
                style="
                  width: 100%;
                  padding: 12px;
                  font-size: ${defaultConfig.font_size * 0.95}px;
                  border: 2px solid rgba(255,255,255,0.2);
                  border-radius: 10px;
                  margin-bottom: 15px;
                  background: rgba(255,255,255,0.1);
                  color: ${defaultConfig.text_color};
                "
              />

              <label for="register-email" style="display: block; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.95}px; margin-bottom: 6px; font-weight: 600;">
                E-mail
              </label>
              <input 
                type="email" 
                id="register-email" 
                required
                style="
                  width: 100%;
                  padding: 12px;
                  font-size: ${defaultConfig.font_size * 0.95}px;
                  border: 2px solid rgba(255,255,255,0.2);
                  border-radius: 10px;
                  margin-bottom: 15px;
                  background: rgba(255,255,255,0.1);
                  color: ${defaultConfig.text_color};
                "
              />

              <label for="register-password" style="display: block; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.95}px; margin-bottom: 6px; font-weight: 600;">
                Senha (m√≠nimo 6)
              </label>
              <input 
                type="password" 
                id="register-password" 
                required
                minlength="6"
                style="
                  width: 100%;
                  padding: 12px;
                  font-size: ${defaultConfig.font_size * 0.95}px;
                  border: 2px solid rgba(255,255,255,0.2);
                  border-radius: 10px;
                  margin-bottom: 15px;
                  background: rgba(255,255,255,0.1);
                  color: ${defaultConfig.text_color};
                "
              />

              <label for="register-confirm" style="display: block; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.95}px; margin-bottom: 6px; font-weight: 600;">
                Confirmar Senha
              </label>
              <input 
                type="password" 
                id="register-confirm" 
                required
                minlength="6"
                style="
                  width: 100%;
                  padding: 12px;
                  font-size: ${defaultConfig.font_size * 0.95}px;
                  border: 2px solid rgba(255,255,255,0.2);
                  border-radius: 10px;
                  margin-bottom: 20px;
                  background: rgba(255,255,255,0.1);
                  color: ${defaultConfig.text_color};
                "
              />

              <button type="submit" style="
                width: 100%;
                background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
                color: #000;
                border: none;
                padding: 15px;
                border-radius: 10px;
                font-size: ${defaultConfig.font_size * 1.1}px;
                font-weight: bold;
                cursor: pointer;
                transition: transform 0.2s;
                box-shadow: 0 5px 20px rgba(255, 215, 0, 0.4);
              " onmouseover="this.style.transform='scale(1.03)'" onmouseout="this.style.transform='scale(1)'">
                CRIAR CONTA
              </button>
            </form>

            <div style="text-align: center; margin-top: 18px;">
              <p style="color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.9}px; margin-bottom: 10px;">
                J√° tem uma conta?
              </p>
              <button onclick="showLoginScreen()" style="
                background: transparent;
                color: #667eea;
                border: 2px solid #667eea;
                padding: 10px 25px;
                border-radius: 8px;
                font-size: ${defaultConfig.font_size * 0.95}px;
                font-weight: bold;
                cursor: pointer;
                transition: all 0.2s;
              " onmouseover="this.style.background='#667eea'; this.style.color='#fff'" onmouseout="this.style.background='transparent'; this.style.color='#667eea'">
                Fazer Login
              </button>
            </div>

            <div style="text-align: center; margin-top: 20px;">
              <button onclick="showHomeScreen()" style="
                background: transparent;
                color: ${defaultConfig.text_color};
                border: none;
                font-size: ${defaultConfig.font_size * 0.85}px;
                cursor: pointer;
                opacity: 0.7;
                transition: opacity 0.2s;
              " onmouseover="this.style.opacity='1'" onmouseout="this.style.opacity='0.7'">
                ‚Üê Voltar
              </button>
            </div>
          </div>
        </div>
      `;
    }

    function renderGameScreen() {
      const customFont = defaultConfig.font_family;
      const baseFontStack = 'Arial, sans-serif';
      
      return `
        <div style="background: ${defaultConfig.background_color}; min-height: 100%; padding: 15px 10px; font-family: ${customFont}, ${baseFontStack};">
          <div style="max-width: 100%; margin: 0 auto;">
            <div style="margin-bottom: 15px;">
              <div style="display: flex; justify-content: space-between; align-items: flex-start; gap: 10px; margin-bottom: 10px;">
                <div style="flex: 1;">
                  <h1 style="font-size: ${defaultConfig.font_size * 1.3}px; color: ${defaultConfig.text_color}; margin-bottom: 5px; font-weight: bold;">
                    ${defaultConfig.game_title}
                  </h1>
                  <p style="font-size: ${defaultConfig.font_size * 0.75}px; color: ${defaultConfig.text_color}; opacity: 0.9;">
                    Clique e arraste para selecionar
                  </p>
                </div>
                <div style="text-align: right; flex-shrink: 0;">
                  <p style="font-size: ${defaultConfig.font_size * 0.75}px; color: #FFD700; margin-bottom: 5px;">
                    üë§ ${currentUser ? currentUser.name.split(' ')[0] : 'Visitante'}
                  </p>
                  <button onclick="logoutUser()" style="
                    background: #e74c3c;
                    color: white;
                    border: none;
                    padding: 6px 12px;
                    border-radius: 6px;
                    font-size: ${defaultConfig.font_size * 0.7}px;
                    font-weight: bold;
                    cursor: pointer;
                  ">
                    üö™ Sair
                  </button>
                </div>
              </div>
              
              <!-- Stats Mobile -->
              <div class="stats-card" style="background: ${defaultConfig.surface_color}; border-radius: 10px; padding: 12px; margin-bottom: 15px; text-align: center;">
                <div style="display: flex; justify-content: space-around; align-items: center; gap: 10px;">
                  <div>
                    <div style="font-size: ${defaultConfig.font_size * 1.2}px; font-weight: bold; color: #FFD700;">
                      ‚≠ê ${totalStars}
                    </div>
                    <div style="font-size: ${defaultConfig.font_size * 0.65}px; color: ${defaultConfig.text_color}; opacity: 0.8;">
                      Estrelas
                    </div>
                  </div>
                  <div>
                    <div style="font-size: ${defaultConfig.font_size * 1.2}px; font-weight: bold; color: ${defaultConfig.text_color};">
                      ${foundWords.size}/${words.length}
                    </div>
                    <div style="font-size: ${defaultConfig.font_size * 0.65}px; color: ${defaultConfig.text_color}; opacity: 0.8;">
                      Palavras
                    </div>
                  </div>
                  <div>
                    <div style="font-size: ${defaultConfig.font_size * 1.2}px; font-weight: bold; color: #FFD700;">
                      üí° ${hintsRemaining}
                    </div>
                    <div style="font-size: ${defaultConfig.font_size * 0.65}px; color: ${defaultConfig.text_color}; opacity: 0.8;">
                      Dicas
                    </div>
                  </div>
                </div>
                <div style="display: flex; gap: 8px; margin-top: 10px;">
                  <button onclick="useHint()" style="
                    flex: 1;
                    background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
                    color: #000;
                    border: none;
                    padding: 10px;
                    border-radius: 8px;
                    font-size: ${defaultConfig.font_size * 0.8}px;
                    font-weight: bold;
                    cursor: pointer;
                  ">
                    üí° Dica
                  </button>
                  <button onclick="showPasswordModal()" style="
                    flex: 1;
                    background: linear-gradient(135deg, #9b59b6 0%, #8e44ad 100%);
                    color: white;
                    border: none;
                    padding: 10px;
                    border-radius: 8px;
                    font-size: ${defaultConfig.font_size * 0.8}px;
                    font-weight: bold;
                    cursor: pointer;
                  ">
                    üîí Senha
                  </button>
                </div>
              </div>
            </div>
            
            <div style="background: ${defaultConfig.surface_color}; border-radius: 10px; padding: 10px; overflow: auto; margin-bottom: 15px;">
              <div id="grid" style="display: inline-block;"></div>
            </div>
            
            <div class="stats-card" style="background: ${defaultConfig.surface_color}; border-radius: 10px; padding: 15px;">
              <h2 style="font-size: ${defaultConfig.font_size}px; color: ${defaultConfig.text_color}; margin-bottom: 12px; text-align: center;">
                üìù Palavras (${words.length})
              </h2>
              <div style="display: grid; grid-template-columns: repeat(auto-fill, minmax(110px, 1fr)); gap: 6px; max-height: 250px; overflow-y: auto;">
                ${words.map(word => `
                  <div id="word-${word}" class="word-item" style="
                    background: ${defaultConfig.primary_action_color};
                    color: ${defaultConfig.text_color};
                    padding: 6px 8px;
                    border-radius: 6px;
                    font-size: ${defaultConfig.font_size * 0.65}px;
                    font-weight: 600;
                    text-align: center;
                  ">
                    ${word}
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function showHomeScreen() {
      currentScreen = 'home';
      render();
    }

    function showLoginScreen() {
      currentScreen = 'login';
      render();
    }

    function showRegisterScreen() {
      currentScreen = 'register';
      render();
    }

    function handleLogin(event) {
      event.preventDefault();
      const email = document.getElementById('login-email').value;
      const password = document.getElementById('login-password').value;
      
      const result = loginUser(email, password);
      if (result.success) {
        currentUser = result.user;
        loadUserProgress();
        currentScreen = 'game';
        initializeGrid();
        render();
        showNotification(`‚úÖ Bem-vindo, ${currentUser.name}!`);
      } else {
        showNotification(result.message);
      }
    }

    function handleRegister(event) {
      event.preventDefault();
      const name = document.getElementById('register-name').value;
      const email = document.getElementById('register-email').value;
      const password = document.getElementById('register-password').value;
      const confirm = document.getElementById('register-confirm').value;
      
      if (password !== confirm) {
        showNotification('‚ùå As senhas n√£o coincidem!');
        return;
      }
      
      const result = registerUser(name, email, password);
      if (result.success) {
        currentUser = result.user;
        currentScreen = 'game';
        initializeGrid();
        render();
        showNotification(`‚úÖ Conta criada! Bem-vindo, ${name}!`);
      } else {
        showNotification(result.message);
      }
    }

    function render() {
      const app = document.getElementById('app');
      
      if (currentScreen === 'home') {
        app.innerHTML = renderHomeScreen();
      } else if (currentScreen === 'login') {
        app.innerHTML = renderLoginScreen();
      } else if (currentScreen === 'register') {
        app.innerHTML = renderRegisterScreen();
      } else if (currentScreen === 'game') {
        app.innerHTML = renderGameScreen();
        
        const gridContainer = document.getElementById('grid');
        gridContainer.innerHTML = grid.map((row, i) => `
          <div style="display: flex;">
            ${row.map((cell, j) => `
              <div class="cell" 
                   data-row="${i}" 
                   data-col="${j}"
                   style="background: ${defaultConfig.secondary_action_color}; color: ${defaultConfig.text_color}; font-size: ${defaultConfig.font_size * 0.8}px;">
                ${cell.letter}
              </div>
            `).join('')}
          </div>
        `).join('');

        document.querySelectorAll('.cell').forEach(cell => {
          cell.addEventListener('mousedown', (e) => {
            isSelecting = true;
            selectedCells = [];
            const row = parseInt(cell.dataset.row);
            const col = parseInt(cell.dataset.col);
            selectedCells.push({ row, col });
            cell.classList.add('selected');
          });

          cell.addEventListener('mouseenter', (e) => {
            if (isSelecting) {
              const row = parseInt(cell.dataset.row);
              const col = parseInt(cell.dataset.col);
              
              if (!selectedCells.some(c => c.row === row && c.col === col)) {
                selectedCells.push({ row, col });
                cell.classList.add('selected');
              }
            }
          });
        });

        document.addEventListener('mouseup', () => {
          if (isSelecting) {
            isSelecting = false;
            checkSelectedWord();
          }
        });

        // Mark already found words
        foundWords.forEach(word => {
          const wordElement = document.getElementById(`word-${word}`);
          if (wordElement) {
            wordElement.classList.add('found');
          }
        });

        updateStats();
      }
    }

    const element = {
      defaultConfig,
      onConfigChange: async (config) => {
        Object.assign(defaultConfig, config);
        render();
      },
      mapToCapabilities: (config) => ({
        recolorables: [
          {
            get: () => config.background_color || defaultConfig.background_color,
            set: (value) => {
              config.background_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ background_color: value });
            }
          },
          {
            get: () => config.surface_color || defaultConfig.surface_color,
            set: (value) => {
              config.surface_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ surface_color: value });
            }
          },
          {
            get: () => config.text_color || defaultConfig.text_color,
            set: (value) => {
              config.text_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ text_color: value });
            }
          },
          {
            get: () => config.primary_action_color || defaultConfig.primary_action_color,
            set: (value) => {
              config.primary_action_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ primary_action_color: value });
            }
          },
          {
            get: () => config.secondary_action_color || defaultConfig.secondary_action_color,
            set: (value) => {
              config.secondary_action_color = value;
              if (window.elementSdk) window.elementSdk.setConfig({ secondary_action_color: value });
            }
          }
        ],
        borderables: [],
        fontEditable: {
          get: () => config.font_family || defaultConfig.font_family,
          set: (value) => {
            config.font_family = value;
            if (window.elementSdk) window.elementSdk.setConfig({ font_family: value });
          }
        },
        fontSizeable: {
          get: () => config.font_size || defaultConfig.font_size,
          set: (value) => {
            config.font_size = value;
            if (window.elementSdk) window.elementSdk.setConfig({ font_size: value });
          }
        }
      }),
      mapToEditPanelValues: (config) => new Map([
        ["game_title", config.game_title || defaultConfig.game_title],
        ["instructions_text", config.instructions_text || defaultConfig.instructions_text]
      ])
    };

    if (window.elementSdk) {
      window.elementSdk.init(element);
    }

    // Check if user is already logged in
    currentUser = getFromLocalStorage('currentUser');
    if (currentUser) {
      loadUserProgress();
      currentScreen = 'game';
      initializeGrid();
    }

    render();
  </script>
 <script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'9b5cd251949ea5e7',t:'MTc2NzA0ODI2MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
